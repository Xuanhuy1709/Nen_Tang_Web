<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Form Thêm Sinh Viên</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #f6f7fb;
      font-family: Arial, sans-serif;
      margin: 0;
    }
    .navbar {
      background: #2980f2;
      color: #fff;
      padding: 14px 28px;
      font-size: 22px;
      font-weight: bold;
      display: flex;
      align-items: center;
      border-radius: 0 0 10px 10px;
    }
    .main-content {
      display: flex;
      gap: 36px;
      justify-content: center;
      align-items: flex-start;
      padding: 36px 0 0 0;
      max-width: 1200px;
      margin: 0 auto;
    }
    .section {
      flex: 1 1 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h2 {
      text-align: center;
      margin-bottom: 16px;
      margin-top: 0;
      background-color: #478bff;
      color: #fff;
      padding: 10px 0;
      border-radius: 5px;
      font-size: 20px;
      width: 100%;
    }
    .form {
      border: 1px solid #333;
      width: 100%;
      max-width: 420px;
      padding: 16px 18px 18px 18px;
      border-radius: 7px;
      background: #fff;
    }
    .form-group {
      margin-bottom: 9px;
    }
    label {
      font-weight: bold;
      margin-bottom: 4px;
      display: block;
    }
    input, textarea {
      padding: 5px 7px;
      border-radius: 4px;
      border: 1px solid #bbb;
      width: 100%;
    }
    .radio-group {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 48px;
      margin-left: 5px;
      margin-bottom: 7px;
      margin-top: 2px;
    }
    .radio-inline {
      display: flex;
      align-items: center;
      font-weight: normal;
      gap: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    button {
      background-color: lightskyblue;
      border: none;
      border-radius: 5px;
      padding: 8px 0;
      width: 100%;
      font-size: 15px;
      font-weight: bold;
      margin-top: 10px;
    }
    button:hover {
      background-color: blue;
      color: #fff;
    }
    td, th {
      text-align: center;
    }
    .actions {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      height: 100%;
    }
    .actions button {
      padding: 4px 10px;
      font-size: 14px;
      border-radius: 5px;
      margin: 0;
      width: auto;
    }
    .edit-btn {
      background-color: #ffc107;
      color: #000;
    }
    .edit-btn:hover {
      background-color: #e0a800;
    }
    .delete-btn {
      background-color: #f44336;
      color: #fff;
    }
    .delete-btn:hover {
      background-color: #c62828;
    }
    .table-responsive {
      background: #fff;
      border-radius: 8px;
      width: 100%;
      max-width: 850px;
    }
    table {
      border-collapse: collapse;
      min-width: 650px;
      width: 100%;
    }
    th, td {
      border: 1px solid #222;
      padding: 6px 12px;
      font-size: 16px;
      white-space: nowrap;
    }
    th {
      background-color: lightskyblue;
    }
    .student-row:hover {
      background: #d5e9ff;
      text-decoration: underline;
    }
    @media (max-width: 900px) {
      .main-content {
        flex-direction: column;
        gap: 24px;
        padding: 18px 8px 0 8px;
      }
      .section, .form, .table-responsive {
        width: 100%;
        max-width: 100%;
      }
      .table-responsive {
        overflow-x: auto !important;
      }
      table {
        min-width: 600px;
      }
    }
  </style>
</head>
<body>
  <div class="navbar">Quản Lý Sinh Viên</div>
  <div class="main-content">
    <div class="section">
      <h2>Form thêm sinh viên</h2>
      <div id="thongBao" style="color: green; margin-bottom: 10px;"></div>
      <div class="form">
        <form id="formSinhVien">
          <div class="form-group">
            <label for="maSV">Mã sinh viên</label>
            <input type="text" id="maSV" name="maSV">
          </div>
          <div class="form-group">
            <label for="hoTen">Họ và tên</label>
            <input type="text" id="hoTen" name="hoTen" >
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="text" id="email" name="email">
          </div>
          <div class="form-group">
            <label for="ngaySinh">Ngày sinh</label>
            <input type="date" id="ngaySinh" name="ngaySinh">
          </div>
          <div class="form-group">
            <label>Giới tính</label>
            <div class="radio-group">
              <label class="radio-inline">
                <input type="radio" id="nam" name="gioiTinh" value="Nam"> Nam
              </label>
              <label class="radio-inline">
                <input type="radio" id="nu" name="gioiTinh" value="Nữ"> Nữ
              </label>
            </div>
          </div>
          <div class="form-group">
            <label for="ghiChu">Ghi chú</label>
            <textarea id="ghiChu" name="ghiChu" rows="1"></textarea>
          </div>
          <button type="submit" id="btnThem">Thêm sinh viên</button>
        </form>
      </div>
    </div>
    <div class="section">
      <h2>Bảng danh sách sinh viên</h2>
      <div class="table-responsive">
        <table id="bangSinhVien">
          <thead>
            <tr>
              <th>STT</th>
              <th>Mã SV</th>
              <th>Họ tên</th>
              <th>Email</th>
              <th>Giới tính</th>
              <th>Ngày sinh</th>
              <th>Hành động</th>
            </tr>
          </thead>
          <tbody>
            <tr class="student-row">
              <td>1</td>
              <td>SV001</td>
              <td>Nguyễn Văn A</td>
              <td>vana@example.com</td>
              <td>Nam</td>
              <td>2004-01-15</td>
              <td>
                <div class="actions">
                  <button class="edit-btn" onclick="suaDong(this)">Sửa</button>
                  <button class="delete-btn" onclick="xoaDong(this)">Xoá</button>
                </div>
              </td>
            </tr>
            <tr class="student-row">
              <td>2</td>
              <td>SV002</td>
              <td>Trần Thị B</td>
              <td>thib@example.com</td>
              <td>Nữ</td>
              <td>2004-07-20</td>
              <td>
                <div class="actions">
                  <button class="edit-btn" onclick="suaDong(this)">Sửa</button>
                  <button class="delete-btn" onclick="xoaDong(this)">Xoá</button>
                </div>
              </td>
            </tr>
            <tr class="student-row">
              <td>3</td>
              <td>SV003</td>
              <td>Phạm Quốc C</td>
              <td>quocc@example.com</td>
              <td>Nam</td>
              <td>2004-12-01</td>
              <td>
                <div class="actions">
                  <button class="edit-btn" onclick="suaDong(this)">Sửa</button>
                  <button class="delete-btn" onclick="xoaDong(this)">Xoá</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<script>
  let selectedRow = null;

 
document.getElementById("btnThem").addEventListener("click", function () {
  const btn = document.getElementById("btnThem");
  if (btn.innerText === "Thêm sinh viên") {
    alert("Đã nhấn nút Thêm");
  } else {
    alert("Đã nhấn nút Cập nhật");
  }
});


  document.getElementById("formSinhVien").addEventListener("submit", function (e) {
    e.preventDefault();

    let maSV = document.getElementById("maSV").value.trim();
    let hoTen = document.getElementById("hoTen").value.trim();
    let email = document.getElementById("email").value.trim();
    let ngaySinh = document.getElementById("ngaySinh").value;
    let gioiTinh = document.querySelector('input[name="gioiTinh"]:checked') ?
      document.querySelector('input[name="gioiTinh"]:checked').value : "";

    if (maSV === "" && hoTen === "" && email === "") {
    alert("Vui lòng nhập đầy đủ thông tin!");
    return;
    }
    if (maSV === "") {
    alert("Mã sinh viên không được để trống!");
    return;
    }
    if (hoTen === "") {
    alert("Họ và tên không được để trống!");
    return;
    }
    if (email === "") {
    alert("Email không được để trống!");
    return;
    }
    let regexEmail = /^\S+@\S+\.\S+$/;
    if (!regexEmail.test(email)) {
      alert("Email không hợp lệ!");
      return;
    }

    if (selectedRow) {
      capNhatSinhVien(maSV, hoTen, email, gioiTinh, ngaySinh);
    } else {
      themSinhVien(maSV, hoTen, email, gioiTinh, ngaySinh);
    }

    document.getElementById("formSinhVien").reset();
  });

  function themSinhVien(maSV, hoTen, email, gioiTinh, ngaySinh) {
    let table = document.getElementById("bangSinhVien").getElementsByTagName("tbody")[0];
    let stt = table.rows.length + 1;
    let newRow = table.insertRow();
    newRow.classList.add("student-row");
    newRow.insertCell(0).innerText = stt;
    newRow.insertCell(1).innerText = maSV;
    newRow.insertCell(2).innerText = hoTen;
    newRow.insertCell(3).innerText = email;
    newRow.insertCell(4).innerText = gioiTinh;
    newRow.insertCell(5).innerText = ngaySinh;
    newRow.insertCell(6).innerHTML = `
      <div class="actions">
        <button class="edit-btn" onclick="suaDong(this)">Sửa</button>
        <button class="delete-btn" onclick="xoaDong(this)">Xoá</button>
      </div>`;
    thongBao("Thêm sinh viên thành công!");
  }

  function suaDong(btn) {
    selectedRow = btn.parentElement.parentElement.parentElement;
    document.getElementById("maSV").value = selectedRow.cells[1].innerText;
    document.getElementById("hoTen").value = selectedRow.cells[2].innerText;
    document.getElementById("email").value = selectedRow.cells[3].innerText;
    document.getElementById("ngaySinh").value = selectedRow.cells[5].innerText;
    let gioiTinh = selectedRow.cells[4].innerText;
    if (gioiTinh === "Nam") document.getElementById("nam").checked = true;
    if (gioiTinh === "Nữ") document.getElementById("nu").checked = true;

    document.getElementById("btnThem").innerText = "Cập nhật";
  }

  function capNhatSinhVien(maSV, hoTen, email, gioiTinh, ngaySinh) {
    if (selectedRow) {
      selectedRow.cells[1].innerText = maSV;
      selectedRow.cells[2].innerText = hoTen;
      selectedRow.cells[3].innerText = email;
      selectedRow.cells[4].innerText = gioiTinh;
      selectedRow.cells[5].innerText = ngaySinh;
      thongBao("Cập nhật thành công!");
      selectedRow = null;
      document.getElementById("btnThem").innerText = "Thêm sinh viên";
    }
  }

  function xoaDong(btn) {
    if (confirm("Bạn có chắc chắn muốn xoá?")) {
      let row = btn.parentElement.parentElement.parentElement;
      row.remove();
      thongBao("Xoá thành công!");
      capNhatLaiSTT();
    }
  }

  function capNhatLaiSTT() {
    let rows = document.querySelectorAll("#bangSinhVien tbody tr");
    rows.forEach((row, index) => {
      row.cells[0].innerText = index + 1;
    });
  }

  function thongBao(msg) {
    const tb = document.getElementById("thongBao");
    tb.innerText = msg;
    setTimeout(() => (tb.innerText = ""), 2500);
  }
</script>

</body>
</html>
